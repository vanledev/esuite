function $(t,e){Object.keys(t).map(r=>e(t[r],r,t))}function v(t,e){function r(o,a){switch(o.type){case"object":return n(o,a);case"array":return c(o,a);default:return a!==void 0?a:o.default!==void 0?o.default:void 0}}function n(o,a){const i={},s=o.properties??{};return $(s,(u,l)=>{if(o.required.includes(l)||a!==void 0&&a[l]!==void 0){let C=a!==void 0?a[l]:void 0;!u.properties&&u.default&&u.type==="object"&&u.additionalProperties&&(C=u.default),i[l]=r(u,C)}}),a&&$(a,(u,l)=>{i[l]===void 0&&u!==void 0&&(i[l]=u)}),i}function c(o,a){if(a===void 0)return o.default?o.default:void 0;const i=[];for(let s=0;s<a.length;s++)i.push(r(o.items??{},a[s]));return i}return r(e,t)}const w="__storage-local-version";function oe(t){const e=Object.keys(t);chrome.runtime.onInstalled.addListener(n=>{(n.reason==="install"||n.reason==="update")&&r()});async function r(){let n=(await chrome.storage.local.get(w))[w];const c=chrome.runtime.getManifest().version;if(c!==n){const o=await chrome.storage.local.get(e),a=e.reduce((i,s)=>{let u=o[s]||{};return u=v(u,t[s]),i[s]=u,i},{[w]:c});await chrome.storage.local.set(a)}}}function ie(t,e){async function r(a){let i;return await navigator.locks.request(_(a),{mode:"shared"},async()=>{i=(await x(a))[a]}),i===void 0&&(i=v(i,t[a])),i}async function n(a,i){await navigator.locks.request(_(a),{mode:"exclusive"},async()=>{let s=(await x(a))[a];s===void 0&&(s=v(s,t[a]));const u=await i(s);e&&e(a,"update",u),await chrome.storage.local.set({[a]:u})})}async function c(a,i){await navigator.locks.request(_(a),{mode:"exclusive"},async()=>{let s=i||{};i||(s=v(s,t[a])),e&&e(a,"update",s),await chrome.storage.local.set({[a]:s})})}async function o(a){return await navigator.locks.request(_(a),{mode:"exclusive"},async()=>{e&&e(a,"delete",void 0),await chrome.storage.local.remove([a])}),Promise.resolve()}return{updateBucket:n,setBucket:c,getBucket:r,deleteBucket:o}}function _(t){return`storage.local.${t}`}function x(t){return new Promise(e=>{chrome.storage.local.get(t,r=>{e(r)})})}var R=typeof global=="object"&&global&&global.Object===Object&&global,k=typeof self=="object"&&self&&self.Object===Object&&self,j=R||k||Function("return this")(),d=j.Symbol,F=Object.prototype,q=F.hasOwnProperty,G=F.toString,g=d?d.toStringTag:void 0;function B(t){var e=q.call(t,g),r=t[g];try{t[g]=void 0;var n=!0}catch{}var c=G.call(t);return n&&(e?t[g]=r:delete t[g]),c}var K=Object.prototype,L=K.toString;function U(t){return L.call(t)}var X="[object Null]",Y="[object Undefined]",I=d?d.toStringTag:void 0;function M(t){return t==null?t===void 0?Y:X:I&&I in Object(t)?B(t):U(t)}function Z(t){return t!=null&&typeof t=="object"}var J="[object Symbol]";function O(t){return typeof t=="symbol"||Z(t)&&M(t)==J}function V(t,e){for(var r=-1,n=t==null?0:t.length,c=Array(n);++r<n;)c[r]=e(t[r],r,t);return c}var P=Array.isArray,Q=1/0,z=d?d.prototype:void 0,E=z?z.toString:void 0;function A(t){if(typeof t=="string")return t;if(P(t))return V(t,A)+"";if(O(t))return E?E.call(t):"";var e=t+"";return e=="0"&&1/t==-Q?"-0":e}function D(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var W="[object AsyncFunction]",tt="[object Function]",et="[object GeneratorFunction]",rt="[object Proxy]";function nt(t){if(!D(t))return!1;var e=M(t);return e==tt||e==et||e==W||e==rt}var S=j["__core-js_shared__"],N=function(){var t=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function at(t){return!!N&&N in t}var ot=Function.prototype,it=ot.toString;function st(t){if(t!=null){try{return it.call(t)}catch{}try{return t+""}catch{}}return""}var ct=/[\\^$.*+?()[\]{}|]/g,ut=/^\[object .+?Constructor\]$/,lt=Function.prototype,ft=Object.prototype,ht=lt.toString,dt=ft.hasOwnProperty,pt=RegExp("^"+ht.call(dt).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gt(t){if(!D(t)||at(t))return!1;var e=nt(t)?pt:ut;return e.test(st(t))}function yt(t,e){return t==null?void 0:t[e]}function H(t,e){var r=yt(t,e);return gt(r)?r:void 0}function _t(t,e){return t===e||t!==t&&e!==e}var vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bt=/^\w*$/;function mt(t,e){if(P(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||O(t)?!0:bt.test(t)||!vt.test(t)||e!=null&&t in Object(e)}var y=H(Object,"create");function wt(){this.__data__=y?y(null):{},this.size=0}function St(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var jt="__lodash_hash_undefined__",Ot=Object.prototype,Pt=Ot.hasOwnProperty;function Tt(t){var e=this.__data__;if(y){var r=e[t];return r===jt?void 0:r}return Pt.call(e,t)?e[t]:void 0}var Ct=Object.prototype,$t=Ct.hasOwnProperty;function xt(t){var e=this.__data__;return y?e[t]!==void 0:$t.call(e,t)}var It="__lodash_hash_undefined__";function zt(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=y&&e===void 0?It:e,this}function f(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}f.prototype.clear=wt;f.prototype.delete=St;f.prototype.get=Tt;f.prototype.has=xt;f.prototype.set=zt;function Et(){this.__data__=[],this.size=0}function b(t,e){for(var r=t.length;r--;)if(_t(t[r][0],e))return r;return-1}var Nt=Array.prototype,Ft=Nt.splice;function Mt(t){var e=this.__data__,r=b(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ft.call(e,r,1),--this.size,!0}function At(t){var e=this.__data__,r=b(e,t);return r<0?void 0:e[r][1]}function Dt(t){return b(this.__data__,t)>-1}function Ht(t,e){var r=this.__data__,n=b(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function p(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}p.prototype.clear=Et;p.prototype.delete=Mt;p.prototype.get=At;p.prototype.has=Dt;p.prototype.set=Ht;var Rt=H(j,"Map");function kt(){this.size=0,this.__data__={hash:new f,map:new(Rt||p),string:new f}}function qt(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function m(t,e){var r=t.__data__;return qt(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Gt(t){var e=m(this,t).delete(t);return this.size-=e?1:0,e}function Bt(t){return m(this,t).get(t)}function Kt(t){return m(this,t).has(t)}function Lt(t,e){var r=m(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function h(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}h.prototype.clear=kt;h.prototype.delete=Gt;h.prototype.get=Bt;h.prototype.has=Kt;h.prototype.set=Lt;var Ut="Expected a function";function T(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Ut);var r=function(){var n=arguments,c=e?e.apply(this,n):n[0],o=r.cache;if(o.has(c))return o.get(c);var a=t.apply(this,n);return r.cache=o.set(c,a)||o,a};return r.cache=new(T.Cache||h),r}T.Cache=h;var Xt=500;function Yt(t){var e=T(t,function(n){return r.size===Xt&&r.clear(),n}),r=e.cache;return e}var Zt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jt=/\\(\\)?/g,Vt=Yt(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Zt,function(r,n,c,o){e.push(c?o.replace(Jt,"$1"):n||r)}),e});function Qt(t){return t==null?"":A(t)}function Wt(t,e){return P(t)?t:mt(t,e)?[t]:Vt(Qt(t))}var te=1/0;function ee(t){if(typeof t=="string"||O(t))return t;var e=t+"";return e=="0"&&1/t==-te?"-0":e}function re(t,e){e=Wt(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[ee(e[r++])];return r&&r==n?t:void 0}function se(t,e,r){var n=t==null?void 0:re(t,e);return n===void 0?r:n}const ne={type:"array",items:{},default:[]},ae={type:"object",properties:{},required:[],default:{}},ce={resumeCursors:ae,history:ne};export{p as L,Rt as M,d as S,Z as a,M as b,P as c,h as d,_t as e,R as f,H as g,D as h,nt as i,Wt as j,ee as k,mt as l,se as m,re as n,ce as o,ie as p,j as r,st as t,oe as y};
